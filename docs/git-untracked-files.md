# Understanding Untracked Files in Your Nvim Config

## Why You Have Untracked Files

**Root Cause**: Files created during development but not yet committed to git.

### Categories of Untracked Files

**1. Configuration Files** (Should commit):
- `lua/utils/` - Custom utilities we created
- `lua/plugins/` - New plugin configs
- `lua/commands/` - Command definitions
- `scripts/` - Bash scripts (git-commit-ai.sh, etc.)

**2. Documentation** (Should commit):
- `docs/` - All documentation files
- `*.md` - Markdown files (summaries, notes)

**3. Temporary/Generated** (Should ignore):
- `lazy-lock.json` - Lazy.nvim lock file (regenerated automatically)
- `.luarc.json` - LSP workspace config (auto-generated)
- `plugin/` - Generated plugin files
- `test_*` - Test files

**4. Build Artifacts** (Should ignore):
- `*.dSYM/` - Debug symbols
- `*.out`, `*.exe` - Compiled binaries

---

## 🔧 Solution 1: Improved .gitignore

**Already updated** at `.config/nvim/.gitignore`:

```gitignore
# Runtime/Plugin Data
lazy-lock.json
.luarc.json
plugin/

# Test/Debug files
test_*
debug_*

# Build artifacts
*.dSYM/
*.out
*.exe
```

**Effect**: Test files and build artifacts now auto-hidden from git status.

---

## 🛠️ Solution 2: Review Utility

**Interactive tool** to review and stage untracked files:

```bash
~/.config/nvim/scripts/git-review-untracked.sh
```

**Features**:
- Categorizes files (config, docs, temp, build)
- Shows what should be committed vs ignored
- One-command staging options
- Detailed file info (size, lines)
- Auto-update .gitignore

**Usage**:
```bash
cd ~/.config/nvim
./scripts/git-review-untracked.sh
```

**Output**:
```
=== Untracked Files Review ===

📝 Configuration Files (should commit):
   lua/utils/git-quick.lua
   lua/utils/git-commit-auto.lua
   scripts/git-commit-ai.sh

📄 Documentation (should commit):
   docs/git-commit-ai.md
   docs/git-quick-workflows.md

🗑️  Temporary/Generated (should ignore):
   lazy-lock.json
   .luarc.json
   plugin/

=== Actions ===
1. Stage all config + docs (recommended)
2. Stage only config files
3. Stage only docs
4. Show detailed file info
5. Update .gitignore for temp files
6. Exit (do nothing)
```

---

## 🚀 Solution 3: Quick Workflows

**Added Nvim keybindings** for faster git operations:

| Key | Action | Time |
|-----|--------|------|
| `<Leader>gQ` | Commit + Push (AI) | ~510ms |
| `<Leader>gY` | Sync (pull + commit + push) | ~1s |
| `<Leader>gu` | Pull | ~200ms |
| `<Leader>gU` | Push | ~200ms |
| `<Leader>gq` | Commit only (AI) | ~510ms |

**Also available as shell aliases** (add to `~/.zshrc`):

```bash
alias gcp='git add -A && git commit -m "$(NONINTERACTIVE=1 ~/.config/nvim/scripts/git-commit-ai.sh)" && git push'
alias gsync='git pull --rebase && git add -A && git commit -m "$(NONINTERACTIVE=1 ~/.config/nvim/scripts/git-commit-ai.sh)" && git push'
```

---

## 📋 Recommended Workflow

### Initial Cleanup (One-time)

```bash
# 1. Review untracked files
cd ~/.config/nvim
./scripts/git-review-untracked.sh

# 2. Stage config + docs (option 1)
# 3. Commit with AI message
<Leader>gQ  # or: gcp from terminal

# 4. Done! Files committed and pushed
```

### Ongoing Maintenance

**When you have untracked files**:

1. **Check what they are**:
   ```bash
   git status --short | grep "^??"
   ```

2. **Review and categorize**:
   ```bash
   ./scripts/git-review-untracked.sh
   ```

3. **Commit or ignore**:
   - Config/docs → Stage and commit
   - Temp files → Add to .gitignore

---

## 🎯 Best Practices

### What to Commit
✅ Custom Lua files (`lua/utils/`, `lua/plugins/`)
✅ Bash scripts (`scripts/`)
✅ Documentation (`docs/`, `*.md`)
✅ Configuration (`polish.lua`, `init.lua`)
✅ Custom keybindings/mappings

### What to Ignore
❌ `lazy-lock.json` (regenerated by Lazy.nvim)
❌ `.luarc.json` (LSP workspace config)
❌ `plugin/` (generated by plugins)
❌ Test files (`test_*`, `debug_*`)
❌ Build artifacts (`*.dSYM`, `*.out`)
❌ LSP logs (`lsp.log`)
❌ Swap files (`*.swp`, `*.swo`)

---

## 🔍 Why This Happens

**Normal development cycle**:
1. Create new features → New files created
2. Files not in `.gitignore` → Show as untracked
3. Decision needed → Commit or ignore

**Your case**:
- We created ~15 new files (utils, scripts, docs)
- `.gitignore` didn't cover temp files
- All showed as untracked

**Solution**:
- ✅ Updated `.gitignore` → Temp files hidden
- ✅ Created review tool → Easy categorization
- ✅ Added quick workflows → Fast commits

---

## 🚀 Quick Reference

**Check untracked files**:
```bash
git status --short | grep "^??"
```

**Review and stage**:
```bash
./scripts/git-review-untracked.sh
```

**Quick commit+push** (Nvim):
```
<Leader>gQ
```

**Quick commit+push** (terminal):
```bash
gcp
```

**Update .gitignore**:
```bash
# Edit .gitignore
vim ~/.config/nvim/.gitignore

# Add pattern
echo "pattern/" >> ~/.config/nvim/.gitignore
```

---

## 📖 See Also

- `git-quick-workflows.md` - Faster git operations
- `git-commit-ai.md` - AI commit message details
- `CLAUDE.md` - Full keybinding reference
