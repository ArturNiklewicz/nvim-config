          ["<"] = { "<gv", desc = "Indent left" },
          ["<C-M-Tab>1"] = { "<C-\\><C-n>:1ToggleTerm<CR>", desc = "Terminal 1" },
          ["<C-M-Tab>2"] = { "<C-\\><C-n>:2ToggleTerm<CR>", desc = "Terminal 2" },
          ["<C-M-Tab>3"] = { "<C-\\><C-n>:3ToggleTerm<CR>", desc = "Terminal 3" },
          ["<C-M-Tab>4"] = { "<C-\\><C-n>:4ToggleTerm<CR>", desc = "Terminal 4" },
          ["<C-M-m>"] = { "<C-w>o", desc = "Maximize window" },
          ["<C-M-t>"] = { "<cmd>ToggleTerm<cr>", desc = "Toggle terminal" },
          ["<C-M-t>"] = { "<cmd>ToggleTerm<cr>", desc = "Toggle terminal" },
          ["<C-a>"] = { "ggVG", desc = "Select all" },
          ["<C-d>"] = { "<C-d>zz", desc = "Scroll down and center" },
          ["<C-u>"] = { "<C-u>zz", desc = "Scroll up and center" },
          ["<Esc><Esc>"] = { "<C-\\><C-n>", desc = "Exit terminal mode" },
          ["<Leader>/"] = { "<Plug>(comment_toggle_linewise_visual)", desc = "Toggle comment" },
          ["<Leader>/"] = { function() require("Comment.api").toggle.linewise.current() end, desc = "Toggle comment" },
          ["<Leader>0"] = { function() buffer_nav.nav_to(10) end, desc = "Go to buffer 10" },
          ["<Leader>1"] = { function() buffer_nav.nav_to(1) end, desc = "Go to buffer 1" },
          ["<Leader>2"] = { function() buffer_nav.nav_to(2) end, desc = "Go to buffer 2" },
          ["<Leader>3"] = { function() buffer_nav.nav_to(3) end, desc = "Go to buffer 3" },
          ["<Leader>4"] = { function() buffer_nav.nav_to(4) end, desc = "Go to buffer 4" },
          ["<Leader>5"] = { function() buffer_nav.nav_to(5) end, desc = "Go to buffer 5" },
          ["<Leader>6"] = { function() buffer_nav.nav_to(6) end, desc = "Go to buffer 6" },
          ["<Leader>7"] = { function() buffer_nav.nav_to(7) end, desc = "Go to buffer 7" },
          ["<Leader>8"] = { function() buffer_nav.nav_to(8) end, desc = "Go to buffer 8" },
          ["<Leader>9"] = { function() buffer_nav.nav_to(9) end, desc = "Go to buffer 9" },
          ["<Leader><Leader>"] = { function() buffer_nav.nav_to_last() end, desc = "Last buffer" },
          ["<Leader>?"] = { "<cmd>Keybindings<cr>", desc = "Show all keybindings" },
          ["<Leader>GI"] = { "<cmd>Octo issue create<cr>", desc = "Create GitHub issue" },
          ["<Leader>GP"] = { "<cmd>Octo pr create<cr>", desc = "Create GitHub PR" },
          ["<Leader>GR"] = { "<cmd>Octo review start<cr>", desc = "Start GitHub review" },
          ["<Leader>Ga"] = { "<cmd>Octo assignee add<cr>", desc = "Add GitHub assignee" },
          ["<Leader>Gc"] = { "<cmd>Octo comment add<cr>", desc = "Add GitHub comment" },
          ["<Leader>Gd"] = { "<cmd>Octo pr diff<cr>", desc = "Show GitHub PR diff" },
          ["<Leader>Gi"] = { "<cmd>Octo issue list<cr>", desc = "List GitHub issues" },
          ["<Leader>Gl"] = { "<cmd>Octo label add<cr>", desc = "Add GitHub label" },
          ["<Leader>Gm"] = { function()
          ["<Leader>Go"] = { "<cmd>Octo pr checkout<cr>", desc = "Checkout GitHub PR" },
          ["<Leader>Gp"] = { "<cmd>Octo pr list<cr>", desc = "List GitHub PRs" },
          ["<Leader>Gr"] = { "<cmd>Octo repo list<cr>", desc = "List GitHub repos" },
          ["<Leader>Gs"] = { "<cmd>Octo search<cr>", desc = "Search GitHub" },
          ["<Leader>Gv"] = { function()
          ["<Leader>Gw"] = { function()
          ["<Leader>MA"] = { "<cmd>CopyAllMessages<cr>", desc = "Copy all messages" },
          ["<Leader>MC"] = { "<cmd>CopyAllErrors<cr>", desc = "Copy all errors" },
          ["<Leader>Ma"] = { "<cmd>Messages<cr>", desc = "Show all messages" },
          ["<Leader>Mc"] = { "<cmd>CopyLastError<cr>", desc = "Copy last error" },
          ["<Leader>Md"] = { "<cmd>messages clear<cr>", desc = "Clear messages" },
          ["<Leader>Me"] = { "<cmd>Errors<cr>", desc = "Show errors" },
          ["<Leader>Q"] = { "<cmd>qa!<cr>", desc = "Quit all (force)" },
          ["<Leader>W"] = { function() require("astrocore.buffer").close_all() end, desc = "Close all buffers" },
          ["<Leader>aC"] = { "<cmd>ClaudeCodeFresh<cr>", desc = "Claude fresh chat" },
          ["<Leader>aD"] = { "<cmd>ClaudeShowAllDiffs<cr>", desc = "Show all diffs" },
          ["<Leader>aS"] = { function() 
          ["<Leader>aa"] = { "<cmd>ClaudeAcceptChanges<cr>", desc = "Accept changes" },
          ["<Leader>ab"] = { "<cmd>ClaudeCodeAdd %<cr>", desc = "Add buffer to Claude" },
          ["<Leader>ac"] = { "<cmd>ClaudeCodeResume<cr>", desc = "Claude toggle (resume)" },
          ["<Leader>ad"] = { "<cmd>ClaudeRejectChanges<cr>", desc = "Reject changes" },
          ["<Leader>af"] = { "<cmd>ClaudeCodeFocus<cr>", desc = "Claude focus" },
          ["<Leader>ai"] = { "<cmd>ClaudeShowDiff<cr>", desc = "Show diff" },
          ["<Leader>ao"] = { "<cmd>ClaudeOpenAllFiles<cr>", desc = "Open edited files" },
          ["<Leader>ar"] = { "<cmd>ClaudeCodeResume<cr>", desc = "Claude resume" },
          ["<Leader>as"] = { "<cmd>ClaudeCodeSend<cr>", desc = "Send to Claude" },
          ["<Leader>b1"] = { function() buffer_nav.nav_to(1) end, desc = "Buffer 1" },
          ["<Leader>b2"] = { function() buffer_nav.nav_to(2) end, desc = "Buffer 2" },
          ["<Leader>b3"] = { function() buffer_nav.nav_to(3) end, desc = "Buffer 3" },
          ["<Leader>b4"] = { function() buffer_nav.nav_to(4) end, desc = "Buffer 4" },
          ["<Leader>b5"] = { function() buffer_nav.nav_to(5) end, desc = "Buffer 5" },
          ["<Leader>b6"] = { function() buffer_nav.nav_to(6) end, desc = "Buffer 6" },
          ["<Leader>b7"] = { function() buffer_nav.nav_to(7) end, desc = "Buffer 7" },
          ["<Leader>b8"] = { function() buffer_nav.nav_to(8) end, desc = "Buffer 8" },
          ["<Leader>b9"] = { function() buffer_nav.nav_to(9) end, desc = "Buffer 9" },
          ["<Leader>bD"] = { function() require("astrocore.buffer").close_all() end, desc = "Delete all buffers" },
          ["<Leader>bS"] = { "<cmd>wa<cr>", desc = "Save all buffers" },
          ["<Leader>bb"] = { function() require("telescope.builtin").buffers() end, desc = "List buffers" },
          ["<Leader>bc"] = { function() vim.notify("Buffer " .. vim.api.nvim_get_current_buf() .. " (" .. buffer_nav.count() .. " total)") end, desc = "Buffer count" },
          ["<Leader>bd"] = { function() buffer_nav.close_smart() end, desc = "Delete buffer" },
          ["<Leader>bo"] = { function() buffer_nav.close_others() end, desc = "Delete other buffers" },
          ["<Leader>bs"] = { "<cmd>w<cr>", desc = "Save buffer" },
          ["<Leader>cD"] = { function() vim.lsp.buf.declaration() end, desc = "Code declaration" },
          ["<Leader>cR"] = { function() vim.lsp.buf.rename() end, desc = "Code rename" },
          ["<Leader>ca"] = { function() vim.lsp.buf.code_action() end, desc = "Code action" },
          ["<Leader>cd"] = { function() vim.lsp.buf.definition() end, desc = "Code definition" },
          ["<Leader>cf"] = { function() vim.lsp.buf.format({ async = true }) end, desc = "Code format" },
          ["<Leader>ch"] = { function() vim.lsp.buf.hover() end, desc = "Code hover" },
          ["<Leader>ci"] = { function() vim.lsp.buf.implementation() end, desc = "Code implementation" },
          ["<Leader>cr"] = { function() vim.lsp.buf.references() end, desc = "Code references" },
          ["<Leader>cs"] = { function() vim.lsp.buf.signature_help() end, desc = "Code signature" },
          ["<Leader>ct"] = { function() vim.lsp.buf.type_definition() end, desc = "Code type definition" },
          ["<Leader>fR"] = { function() require("telescope.builtin").registers() end, desc = "Registers" },
          ["<Leader>fS"] = { function() require("telescope.builtin").lsp_workspace_symbols() end, desc = "Workspace symbols" },
          ["<Leader>fb"] = { function() require("telescope.builtin").buffers() end, desc = "Find buffers" },
          ["<Leader>fc"] = { function() require("telescope.builtin").commands() end, desc = "Commands" },
          ["<Leader>ff"] = { function() require("telescope.builtin").find_files() end, desc = "Find files" },
          ["<Leader>fg"] = { function() require("telescope.builtin").live_grep() end, desc = "Live grep" },
          ["<Leader>fh"] = { function() require("telescope.builtin").help_tags() end, desc = "Help tags" },
          ["<Leader>fk"] = { function() require("telescope.builtin").keymaps() end, desc = "Keymaps" },
          ["<Leader>fm"] = { function() require("telescope.builtin").marks() end, desc = "Find marks" },
          ["<Leader>fo"] = { function() require("telescope.builtin").vim_options() end, desc = "Vim options" },
          ["<Leader>fr"] = { function() require("telescope.builtin").oldfiles() end, desc = "Recent files" },
          ["<Leader>fs"] = { function() require("telescope.builtin").lsp_document_symbols() end, desc = "Document symbols" },
          ["<Leader>gC"] = { function() require("telescope.builtin").git_bcommits() end, desc = "Buffer commits" },
          ["<Leader>gD"] = { "<cmd>DiffviewClose<cr>", desc = "Close diff view" },
          ["<Leader>gH"] = { "<cmd>DiffviewFileHistory<cr>", desc = "Branch history" },
          ["<Leader>gT"] = { "<cmd>Gitsigns toggle_current_line_blame<cr>", desc = "Toggle blame line" },
          ["<Leader>gW"] = { "<cmd>Gitsigns toggle_word_diff<cr>", desc = "Toggle word diff" },
          ["<Leader>gb"] = { function() require("telescope.builtin").git_branches() end, desc = "Git branches" },
          ["<Leader>gc"] = { function() require("telescope.builtin").git_commits() end, desc = "Git commits" },
          ["<Leader>gd"] = { "<cmd>DiffviewOpen<cr>", desc = "Git diff view" },
          ["<Leader>gf"] = { function()
          ["<Leader>gh"] = { "<cmd>DiffviewFileHistory %<cr>", desc = "File history" },
          ["<Leader>gj"] = { function()
          ["<Leader>gk"] = { function()
          ["<Leader>gl"] = { "<cmd>Gitsigns toggle_linehl<cr>", desc = "Toggle line highlighting" },
          ["<Leader>gn"] = { "<cmd>Gitsigns toggle_numhl<cr>", desc = "Toggle line number highlighting" },
          ["<Leader>gr"] = { "<cmd>Gitsigns refresh<cr>", desc = "Refresh git signs" },
          ["<Leader>gs"] = { function() require("telescope.builtin").git_status() end, desc = "Git status" },
          ["<Leader>gt"] = { "<cmd>Gitsigns toggle_signs<cr>", desc = "Toggle git signs" },
          ["<Leader>gwa"] = { function()
          ["<Leader>gwj"] = { function()
          ["<Leader>gwk"] = { function()
          ["<Leader>gwl"] = { function()
          ["<Leader>gwm"] = { function()
          ["<Leader>gwr"] = { function()
          ["<Leader>gws"] = { function()
          ["<Leader>jE"] = { "<cmd>MoltenExportOutput<cr>", desc = "Export output" },
          ["<Leader>jI"] = { "<cmd>MoltenImportOutput<cr>", desc = "Import output" },
          ["<Leader>jR"] = { "<cmd>MoltenRestart<cr>", desc = "Restart kernel" },
          ["<Leader>jS"] = { "<cmd>MoltenStop<cr>", desc = "Stop kernel" },
          ["<Leader>jd"] = { "<cmd>MoltenDelete<cr>", desc = "Delete cell" },
          ["<Leader>je"] = { "<cmd>MoltenEvaluateOperator<cr>", desc = "Evaluate operator" },
          ["<Leader>jh"] = { "<cmd>MoltenHideOutput<cr>", desc = "Hide output" },
          ["<Leader>ji"] = { "<cmd>MoltenInit<cr>", desc = "Initialize Molten" },
          ["<Leader>jk"] = { "<cmd>MoltenKernelStatusToggle<cr>", desc = "Toggle kernel status" },
          ["<Leader>jl"] = { "<cmd>MoltenEvaluateLine<cr>", desc = "Evaluate line" },
          ["<Leader>jo"] = { "<cmd>MoltenShowOutput<cr>", desc = "Show output" },
          ["<Leader>jr"] = { "<cmd>MoltenReevaluateCell<cr>", desc = "Re-evaluate cell" },
          ["<Leader>js"] = { "<cmd>MoltenStart<cr>", desc = "Start kernel" },
          ["<Leader>jv"] = { ":<C-u>MoltenEvaluateVisual<cr>gv", desc = "Evaluate selection" },
          ["<Leader>mC"] = { "<Cmd>MCclear<CR>", desc = "Multicursor clear" },
          ["<Leader>ma"] = { "<Cmd>MCstart<CR>", desc = "Multicursor add" },
          ["<Leader>mc"] = { "<Cmd>MCstart<CR>", desc = "Multicursor create" },
          ["<Leader>mc"] = { "<Cmd>MCstart<CR>", desc = "Multicursor create" },
          ["<Leader>mn"] = { "<Cmd>MCpattern<CR>", desc = "Multicursor pattern" },
          ["<Leader>mn"] = { "<Cmd>MCpattern<CR>", desc = "Multicursor pattern" },
          ["<Leader>q"] = { "<cmd>confirm q<cr>", desc = "Quit" },
          ["<Leader>rc"] = { ":%s/<C-r><C-w>//g<Left><Left>", desc = "Replace word (native)" },
          ["<Leader>rf"] = { function() require("spectre").open_file_search({select_word=true}) end, desc = "Replace in file" },
          ["<Leader>rn"] = { function() vim.lsp.buf.rename() end, desc = "Rename symbol" },
          ["<Leader>rr"] = { "<cmd>Spectre<cr>", desc = "Replace (Spectre)" },
          ["<Leader>rr"] = { "<cmd>Spectre<cr>", desc = "Replace selection" },
          ["<Leader>rw"] = { function() require("spectre").open_visual() end, desc = "Replace selection" },
          ["<Leader>rw"] = { function() require("spectre").open_visual({select_word=true}) end, desc = "Replace word" },
          ["<Leader>sW"] = { function() require("telescope.builtin").grep_string({ word_match = "-w" }) end, desc = "Search word (whole)" },
          ["<Leader>sc"] = { function() require("telescope.builtin").command_history() end, desc = "Command history" },
          ["<Leader>sg"] = { function() require("telescope.builtin").live_grep() end, desc = "Search project" },
          ["<Leader>sh"] = { function() require("telescope.builtin").search_history() end, desc = "Search history" },
          ["<Leader>sn"] = { "<cmd>nohlsearch<cr>", desc = "Clear search highlight" },
          ["<Leader>sr"] = { function() require("telescope.builtin").resume() end, desc = "Resume last search" },
          ["<Leader>ss"] = { function() require("telescope.builtin").current_buffer_fuzzy_find() end, desc = "Search buffer" },
          ["<Leader>sw"] = { function() 
          ["<Leader>sw"] = { function() require("telescope.builtin").grep_string() end, desc = "Search word" },
          ["<Leader>ta"] = { function()
          ["<Leader>tn"] = { function()
          ["<Leader>tt"] = { function()
          ["<Leader>uC"] = { "<cmd>set cursorcolumn!<cr>", desc = "Toggle cursor column" },
          ["<Leader>uc"] = { "<cmd>set cursorline!<cr>", desc = "Toggle cursor line" },
          ["<Leader>uh"] = { "<cmd>set hlsearch!<cr>", desc = "Toggle search highlight" },
          ["<Leader>ul"] = { "<cmd>set list!<cr>", desc = "Toggle list chars" },
          ["<Leader>un"] = { "<cmd>set number!<cr>", desc = "Toggle line numbers" },
          ["<Leader>ur"] = { "<cmd>set relativenumber!<cr>", desc = "Toggle relative numbers" },
          ["<Leader>us"] = { "<cmd>set spell!<cr>", desc = "Toggle spell check" },
          ["<Leader>uw"] = { "<cmd>set wrap!<cr>", desc = "Toggle word wrap" },
          ["<Leader>uz"] = { function() require("zen-mode").toggle() end, desc = "Toggle zen mode" },
          ["<Leader>vd"] = { "<Cmd>MCstart<CR>", desc = "Create multicursor" },
          ["<Leader>vh"] = { function() require("illuminate").prev_reference() end, desc = "Previous reference" },
          ["<Leader>vl"] = { function() require("illuminate").next_reference() end, desc = "Next reference" },
          ["<Leader>vm"] = { "<Cmd>MCclear<CR>", desc = "Clear multicursors" },
          ["<Leader>vn"] = { "<Cmd>MCpattern<CR>", desc = "Multicursor pattern" },
          ["<Leader>vp"] = { function() require("telescope").extensions.neoclip.default() end, desc = "Paste from history" },
          ["<Leader>vy"] = { "<cmd>Telescope neoclip<cr>", desc = "Clipboard history" },
          ["<Leader>w"] = { function() buffer_nav.close_smart() end, desc = "Close buffer" },
          ["<Leader>xN"] = { function() vim.diagnostic.goto_next({ severity = vim.diagnostic.severity.ERROR }) end, desc = "Next error" },
          ["<Leader>xP"] = { function() vim.diagnostic.goto_prev({ severity = vim.diagnostic.severity.ERROR }) end, desc = "Previous error" },
          ["<Leader>xl"] = { function() vim.diagnostic.setloclist() end, desc = "Diagnostics to loclist" },
          ["<Leader>xn"] = { function() vim.diagnostic.goto_next() end, desc = "Next diagnostic" },
          ["<Leader>xp"] = { function() vim.diagnostic.goto_prev() end, desc = "Previous diagnostic" },
          ["<Leader>xq"] = { function() vim.diagnostic.setqflist() end, desc = "Diagnostics to qflist" },
          ["<Leader>xx"] = { function() vim.diagnostic.open_float() end, desc = "Show diagnostics" },
          ["<M-1>"] = { "1<C-w>w", desc = "Focus window 1" },
          ["<M-2>"] = { "2<C-w>w", desc = "Focus window 2" },
          ["<M-3>"] = { "3<C-w>w", desc = "Focus window 3" },
          ["<M-4>"] = { "4<C-w>w", desc = "Focus window 4" },
          ["<M-5>"] = { "5<C-w>w", desc = "Focus window 5" },
          ["<M-6>"] = { "6<C-w>w", desc = "Focus window 6" },
          ["<M-7>"] = { "7<C-w>w", desc = "Focus window 7" },
          ["<M-8>"] = { "8<C-w>w", desc = "Focus window 8" },
          ["<S-A-d>"] = { "dd", desc = "Delete line" },
          [">"] = { ">gv", desc = "Indent right" },
          ["J"] = { ":m '>+1<CR>gv=gv", desc = "Move selection down" },
          ["K"] = { ":m '<-2<CR>gv=gv", desc = "Move selection up" },
          ["N"] = { "Nzzzv", desc = "Previous search result centered" },
          ["[b"] = { function() require("astrocore.buffer").nav(-vim.v.count1) end, desc = "Previous buffer" },
          ["[d"] = { function() vim.diagnostic.goto_prev() end, desc = "Previous diagnostic" },
          ["[g"] = { function() require("gitsigns").prev_hunk() end, desc = "Previous git hunk" },
          ["[j"] = { "<cmd>MoltenPrev<cr>", desc = "Previous Jupyter cell" },
          ["]b"] = { function() require("astrocore.buffer").nav(vim.v.count1) end, desc = "Next buffer" },
          ["]d"] = { function() vim.diagnostic.goto_next() end, desc = "Next diagnostic" },
          ["]g"] = { function() require("gitsigns").next_hunk() end, desc = "Next git hunk" },
          ["]j"] = { "<cmd>MoltenNext<cr>", desc = "Next Jupyter cell" },
          ["n"] = { "nzzzv", desc = "Next search result centered" },
